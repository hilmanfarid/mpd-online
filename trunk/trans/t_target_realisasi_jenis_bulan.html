<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252">
<title>t_customer_order</title>
<meta name="GENERATOR" content="CodeCharge Studio 4.3.00.7676">
<link rel="stylesheet" type="text/css" href="../Styles/sikp/Style_doctype.css">
<script type="text/javascript" src="../js/jquery-1.9.1.min.js"></script>
<script src="../js/highcharts.js"></script>
<script src="../js/exporting.js"></script>
<script>
$(function () {
	$.getJSON( "../services/detail_jenis_bulan.php?t_revenue_target_id="+document.getElementById("t_target_realisasi_jenis_bulanFormt_revenue_target_id").value, function( items ) {
		var target_amount = [];
		var realisasi_amt = [];
		var bulan = [];
		var vat_code = [];
		var detail_vat_code = [];
		
		var jumlah_detail = items.length / 12;
		
		for(i = 0; i < jumlah_detail; i++){
			target_amount[i] = [];
			realisasi_amt[i] = [];
			bulan[i] = [];
			vat_code[i] = [];
			detail_vat_code[i] = [];

			for(j = 0; j < 12; j++){
				target_amount[i][j] = items[i + j * jumlah_detail][0];
				realisasi_amt[i][j] = items[i + j * jumlah_detail][1];
				bulan[i][j] = items[i + j * jumlah_detail][2];
				vat_code[i][j] = items[i + j * jumlah_detail][3];
				detail_vat_code[i][j] = items[i + j * jumlah_detail][4];
			}
		}
		
		var series_colors = ['#2f7ed8', '#0d233a', '#8bbc21', '#910000', '#1aadce', '#492970', '#f28f43', '#77a1e5', '#c42525', '#a6c96a'];
		data_series = [];
		for(i = 0; i < jumlah_detail; i++){
			data_series.push({showInLegend: true, name: "Target " + detail_vat_code[i][0], data: target_amount[i], stack: "Target", color: series_colors[i]});
			data_series.push({showInLegend: true, name: "Realisasi " + detail_vat_code[i][0], data: realisasi_amt[i], stack: "Realisasi", color: series_colors[i]});
		}
		
		var judul = vat_code[0][0];
		
		$("#container").highcharts({
			chart: {
				type: "column"
			},
			title: {
				text: "Target vs Realisasi " + judul + " Bulanan"
			},
			subtitle: {
				text: "Disyanjak Kota Bandung"
			},
			xAxis: {
				categories: bulan[0]
			},
			yAxis: {
				min: 0,
				title: {
					text: ""
				},
				stackLabels: {
					enabled: true,
                    formatter: function() {
						mil = this.total / 1000000000; //1M
						mil = Math.round(mil * Math.pow(10, 3)) / Math.pow(10, 3);
	                    return mil + " M";
                	}
				}
			},
			tooltip: {
				pointFormat: "{series.name}: <b>{point.y:,.2f}<b><br/>"+
				"Total: <b>{point.stackTotal:,.2f}</b>"
			},
			plotOptions: {
				column: {
					pointPadding: 0.2,
					borderWidth: 0,
					stacking: 'normal'
				}
			},
			series: data_series
		});
	});
});
$(function () {
	$.getJSON( "../services/jenis_bulan.php?t_revenue_target_id="+document.getElementById("t_target_realisasi_jenis_bulanFormt_revenue_target_id").value, function( items ) {
		var target_amount = [];
		var realisasi_amt = [];
		var bulan = [];
		var vat_code = [];
		
		var jumlah = items.length;
		
		for(i = 0; i < jumlah; i++){
			target_amount[i] = items[i][0];
			realisasi_amt[i] = items[i][1];
			bulan[i] = items[i][2];
			vat_code[i] = items[i][3];
		}

		data_series = [];
		for(i = 0; i < jumlah; i++){
			data_series.push({showInLegend: true, name: "Target " + vat_code[0], data: target_amount[i]});
			data_series.push({showInLegend: true, name: "Realisasi " + vat_code[0], data: realisasi_amt[i]});
		}
		
		var judul = vat_code[0];

		$("#container2").highcharts({
			chart: {
				type: "column"
			},
			title: {
				text: "Target vs Realisasi " + judul + " Bulanan"
			},
			subtitle: {
				text: "Disyanjak Kota Bandung"
			},
			xAxis: {
				categories: bulan
			},
			yAxis: {
				min: 0,
				title: {
					text: ""
				}
			},
			tooltip: {
				headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
				pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
					'<td style="padding:0"><b>{point.y}</b></td></tr>',
				footerFormat: '</table>',
				shared: true,
				useHTML: true
			},
			plotOptions: {
				column: {
					pointPadding: 0.2,
					borderWidth: 0
				}
			},
			series: [{showInLegend: true, name: "Target " + vat_code[0], data: target_amount},
			{showInLegend: true, name: "Realisasi " + vat_code[0], data: realisasi_amt}]
		});
	});
});
</script>
</head>
<body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<div style="POSITION: absolute; WIDTH: 99.9%; HEIGHT: 37px; BORDER-TOP: #a2a2a2 1px solid" id="tabtop" class="tab-container">
  <div class="tab-background-styled">
    <div class="th tab-button">
      <label onclick="javascript:toTarget()">
      <div class="tab-title">
        TARGET VS REALISASI 
      </div>
      </label>
    </div>
    <div class="th tab-button">
      <label onclick="javascript:toJenis()">
      <div class="tab-title">
        PER JENIS PAJAK 
      </div>
      </label>
    </div>
    <div class="th tab-button">
      <div class="tab-title-selected">
        BULANAN PER JENIS PAJAK 
      </div>
    </div>
    <div class="th tab-button">
      <label onclick="javascript:toMingguan()">
      <div class="tab-title">
        MINGGUAN PER JENIS PAJAK 
      </div>
      </label>
    </div>
    <div class="th tab-button">
      <label onclick="javascript:toHarian()">
      <div class="tab-title">
        HARIAN PER JENIS PAJAK 
      </div>
      </label>
    </div>
  </div>
</div>
<div style="CLEAR: both; PADDING-TOP: 50px">
  <table class="module-container" border="0" cellspacing="0" cellpadding="0" align="center">
    <tr>
      <td>
        <div id="container"></div>
 		<div id="container2"></div>
        <p>&nbsp; </p>
        <!-- BEGIN Record t_target_realisasi_jenis_bulanForm -->
        <form id="t_target_realisasi_jenis_bulanForm" method="post" name="{HTMLFormName}" action="{Action}">
          <h2><input id="t_target_realisasi_jenis_bulanFormp_year_period_id" name="{p_year_period_id_Name}" value="{p_year_period_id}" type="hidden"><input id="t_target_realisasi_jenis_bulanFormt_revenue_target_id" name="{t_revenue_target_id_Name}" value="{t_revenue_target_id}" type="hidden"></h2>
        </form>
        <!-- END Record t_target_realisasi_jenis_bulanForm --></td>
    </tr>
  </table>
</div>
<script language="javascript">
function toTarget()
{
  var idelement;
  if (idelement = document.getElementById("t_target_realisasi_jenis_bulanFormp_year_period_id"))
  {
    var pid=idelement.value;
    if (pid!= "" && pid != 0 && pid != false && pid != undefined &&  pid != null)
    {
     location.href="t_target_realisasi.php?p_year_period_id="+pid;
    } else {
     alert("Pilih salah satu TAHUN!");
    }
  } else {
     alert("Pilih salah satu TAHUN!");
  }
}

function toJenis()
{
  var idelement;
  if (idelement = document.getElementById("t_target_realisasi_jenis_bulanFormp_year_period_id"))
  {
    var pid=idelement.value;
    if (pid!= "" && pid != 0 && pid != false && pid != undefined &&  pid != null)
    {
     location.href="t_target_realisasi_jenis.php?p_year_period_id="+pid;
    } else {
     alert("Pilih salah satu TAHUN!");
    }
  } else {
     alert("Pilih salah satu TAHUN!");
  }
}
</script>
</body>
</html>